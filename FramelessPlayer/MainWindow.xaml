<Controls:MetroWindow x:Class="FramelessPlayer.MainWindow"
                      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                      xmlns:Controls="http://metro.mahapps.com/winfx/xaml/controls"
                      xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
                      
                      xmlns:wpf="clr-namespace:Meta.Vlc.Wpf;assembly=Meta.Vlc.Wpf"
                      
                      Title="MainWindow"
                      
                      SaveWindowPosition="True"
                      ResizeMode="CanResize"
                      Topmost="True"
                      
                      GlowBrush="{DynamicResource AccentColorBrush}"
                      EnableDWMDropShadow="False"
                      
                      Height="750" Width="1280"
                      MinHeight="510" MinWidth="854">


    
    
    <!--Window commands-->
    <Controls:MetroWindow.LeftWindowCommands>
        <Controls:WindowCommands>
            <Button Name="Settings_Btn"
                    Click="Settings_Btn_Click"
                    MouseEnter="Settings_Btn_MouseEnter"
                    MouseLeave="Settings_Btn_MouseLeave"
                    ToolTip="Access the app settings">
                <iconPacks:PackIconMaterial Name="Settings_Ico" Kind="Settings"/>
            </Button>
        </Controls:WindowCommands>
    </Controls:MetroWindow.LeftWindowCommands>

    <!--Flyout controls-->
    <Controls:MetroWindow.Flyouts>
        <Controls:FlyoutsControl>
            
            <!-- Settings menu flyout -->
            <Controls:Flyout Name="Settings_Flyout"
                             Header="Settings"
                             Theme="Adapt"
                             Position="Left"
                             Width="400"
                             CloseButtonVisibility="Collapsed"
                             BorderBrush="#E5838383" BorderThickness="0,0,1,0">
                <Grid Margin="5,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30px"/>
                        <RowDefinition Height="30px"/>
                        <RowDefinition Height="30px"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>

                    <Label>Colour</Label>
                    <ComboBox Name="Accent_ComboBox"
                              SelectionChanged="Accent_ComboBox_SelectionChanged"
                              Grid.Column="1">
                    </ComboBox>

                    <Label Grid.Row="1">Dark mode</Label>
                    <Button Name="DarkMode_Toggle"
                            Style="{DynamicResource SquareButtonStyle}"
                            Click="DarkMode_Toggle_Click"
                            Grid.Row="1" Grid.Column="1" BorderThickness="1">
                        <iconPacks:PackIconFontAwesome Name="DarkMode_Icon" Kind="SunRegular" />
                    </Button>
                </Grid>
            </Controls:Flyout>


        </Controls:FlyoutsControl>
    </Controls:MetroWindow.Flyouts>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition Height="48"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>

        <!-- Main player -->
        <MediaElement Name="MainPlayer"
                      ScrubbingEnabled="True"
                      Stretch="Uniform"
                      Grid.RowSpan="2" Grid.ColumnSpan="2"
                      LoadedBehavior="Manual"
                      UnloadedBehavior="Manual"
                      MediaEnded="MainPlayer_MediaEnded"
                      MediaOpened="MainPlayer_MediaOpened"></MediaElement>
        
        <!-- Media control buttons -->
        <Grid Name="MediaControlGrid"
              Grid.Row="1"
              MouseEnter="MediaControlGrid_MouseEnter"
              MouseLeave="MediaControlGrid_MouseLeave"
              Opacity="0.1" Background="#19000000">
            
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition Height="10"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="38"/>
                <ColumnDefinition Width="38"/>
                <ColumnDefinition Width="38"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <!--Buttons-->
            <Button Name="Play_Btn"
                    Click="Play_Btn_Click"
                    Style="{DynamicResource MetroCircleButtonStyle}"
                    Background="#FF838383"
                    Grid.Column="1">
                <iconPacks:PackIconMaterial Name="PlayButton_Ico" Kind="Play" />
            </Button>
            <Button Name="Stop_Btn"
                    Click="Stop_Btn_Click"
                    Style="{DynamicResource MetroCircleButtonStyle}"
                    Background="#FF838383"
                    Grid.Column="2">
                <iconPacks:PackIconMaterial Kind="Stop" />
            </Button>
            <Button Name="Options_Btn"
                    Click="Options_Btn_Click"
                    Style="{DynamicResource MetroCircleButtonStyle}"
                    Background="#FF838383"
                    Grid.Column="3">
                <iconPacks:PackIconMaterial Kind="DotsHorizontal" />
            </Button>
            
            <!-- Display time -->
            <Label Name="Time_Label"
                   VerticalAlignment="Center" HorizontalAlignment="Left"
                   Margin="5,5,5,3"
                   FontSize="14"></Label>
            
            <!--Progressbar-->
            <Slider Name="VideoProgress_Slider"
                    Grid.Row="1" Grid.ColumnSpan="5"
                    Style="{DynamicResource FlatSlider}"
                    
                    Minimum="0"
                    TickFrequency="1"
                    
                    Thumb.DragStarted="VideoProgress_Slider_DragStarted"
                    Thumb.DragCompleted="VideoProgress_Slider_DragCompleted"
                    ValueChanged="VideoProgress_Slider_ValueChanged"/>

        </Grid>
        
        <!-- File select screen --> 
        <Button Name="SelectFile_Btn"
                Click="SelectFile_Btn_Click"
                Style="{DynamicResource SquareButtonStyle}"
                BorderThickness="0"
                Grid.RowSpan="2" Grid.ColumnSpan="2">
            <StackPanel HorizontalAlignment="Center">
                <iconPacks:PackIconFontAwesome Kind="FilmSolid" HorizontalAlignment="Center" Width="128" Height="128" />
                <TextBlock Text="Load video" HorizontalAlignment="Center" FontSize="24"></TextBlock>
            </StackPanel>
        </Button>

        <wpf:VlcPlayer x:Name="VLC" />
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition Width="10*"/>
                <ColumnDefinition Width="10*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0" Content="Play" HorizontalAlignment="Stretch" Click="Play_Click" />
            <Button Grid.Column="1" Content="Pause" Click="Pause_Click" />
            <Button Grid.Column="2" Content="Stop" Click="Stop_Click" />
            
            <Grid Grid.Column="3">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBox x:Name="path" />

                <Button Grid.Column="1" Content="Load" Click="Load_Click" />
            </Grid>

            <Grid Grid.Column="4" Background="#FFDDDDDD">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="Volume:" VerticalAlignment="Center"></TextBlock>
                <Slider Grid.Column="1" Value="{Binding Volume, ElementName=Player}" VerticalAlignment="Center" Maximum="100"/>
            </Grid>

            <ProgressBar Grid.Column="5" x:Name="ProgressBar" Opacity="0.8" Value="{Binding Position, ElementName=Player}" VerticalAlignment="Bottom" Height="10" Maximum="1" SmallChange="0.00001" MouseDown="ProgressBar_MouseDown" />
        </Grid>

    </Grid>
</Controls:MetroWindow>
